# Title slide

My name is Herb Susmann, I'm currently a post-doc at the NYU Medical School
down the street from here. 

Today I'll be talking about our work developing Bayesian models for demographic and
health indicators.

# Who I am

I did my PhD with Leontine Alkema at UMass Amherst, working on building models
for country-level family planning indicators.

I also spent a few years in France, which is where I ran into Adrian Raftery
who I've been collaborating with on migration projection.

# Outline

The general goal of my modeling work has been to build tools for estimating and
projecting health indicators in multiple populations.

A major use of these projections is to track progress towards international
goals, like the SDGs.

Tracking and projecting these indicators can be tricky, especially when data
come from multiple sources, the data may be noisy, or there may be few
observations available. 

To deal with this, statistical models are needed to take the available data and
generate probabilistic estimates and projections.

The main goal of this talk is to introduce a general framework we developed for
modeling these kinds of indicators. Then I'll show a few examples of models
that we've built using this framework. 

My main goal is to show you some tools and modeling techniques that might be
useful for your work. I won't go too far into the mathematical details; for
that, we have papers and preprints online.

# Modeling Framework

The context behind our modeling framework is that there are a bunch of
different indicators that people are interested in, and many different models
have been developed for them by different groups. Many of them are similar, but
we found it difficult to compare them because they all use different notation. 

We proposed this model class, called Temporal Models for Multiple Populations,
as a way to try to unify these models under a single notation, and to provide
a jumping off point for developing future models.

# TMMP 1
Let's jump in to how the framework works. 

For some indicator of interest, we define $\eta_{c,t}$ to be the true,
unobserved value of the indicator at time $t$ and in population $c$. For
example, $c$ might index a country.

A model is then split into two parts: a _process model_ and a _data model_.

The process model describes how the true value of the indicator evolves over
time. This may be informed by things like covariates or by systematic trends we
expect the indicator to follow. 

We then observe data $y_i$, where each observation is associated with a time
point and a population. It may have additional properties as well, like an
indicator of what type of data source it came from (survey data, census, etc.)

The data model describes the relationship between the true value of the
indicator and the observed data.

# TMMP 2

In a diagram, we have on top the true value of the indicator as it evolves over
time, a process described by the process model.

Any observations are generated by the data model. A common challenge is that
we may not have an observation for every time point: we need the process model
to fill in those gaps. 

# Process Model
I'm going to focus today on the process model. We break the process model into
multiple components which, taken together, describe the true value of the
indicator for each population and time point. 

# Covariate
The first component allows for the use of covariate information, akin to
a traditional regression equation.

# Systematic
The second equation captures any systematic trends we expect the indicator to
follow. For example, a model for modern family planning use assumes that
adoption follows roughly a logistic growth curve. We can use the systematic
component to describe these sorts of expected trends.

# Offset
The offset term is kind of a catch-all term for capturing ad-hoc things some
models do with separate modeling steps; I won't talk much about this. 

# Smoothing
The final component is a residual term that allows the model to capture any
data-driven deviations from the expected trend. To prevent over-fitting, some
kind of smoothing model is typically placed on the residuals, like an
autoregressive process.

# Examples
In our paper we give examples of various models that fall into this framework. 

We also do a deep dive comparing two models for the Under-5 mortality rate in
countries, which using our notation we can compare head-to-head to understand
how the models differ in structure.

# Vignette 1
Now that I've introduced our model framework, I'm going to go through a few
examples showing how we've built off of it to build models. 

My hope is that some of the modeling techniques I'll show you might be helpful
for your own work. 

The first project where we used this model framework was inspired by indicators
that follow a _transition_ between stable states. 

A classical example is the total fertility rate, which transitions from high to
low as countries go through the demographic transition. 

Existing models draw on these patterns to inform projections.

We built off of our framework to propose a flexible type of model for modeling
indicators that follow transitions. 

# Case study
The indicator that inspired this work is the Modern Contraceptive Prevalence
Rate (mCPR). 

# Data
Here's what the raw mCPR data look like. Countries typically started with low
mCPR, adoption increases quickly, and then adoption reaches a plateau as demand
is saturated. 

This trend can be seen clearly in countries with a lot of data; in countries
with few observations, the modeling challenge is to fill in the gaps by
borrowing information from other countries that are further along in the
transition.

# Transition Models
Working within the TMMPs class, we define a type of model we call a transition
model. A transition model uses two components: a systematic and smoothing
component. The systematic component assumes that the _rate of change_ of the
indicator is a function of its level. In other words, at any time $t$, the next
value will be the value at time $t-1$ plus an expected rate of change, which is
given by a function $f$. The function $f$ looks at the value of the indicator
at the previous time step, and returns an expected rate of change. 

# B-spline transition model
To model the expected rate of change in a flexible way, we used B-splines. The
idea with B-splines is that they are data-adaptive: we don't need to specify in
advance what we think the shape of $f$ should look like. 

# B-spline example

It's perhaps easiest to give an example. On the right, the plot shows how mCPR
evolves over time. On the left, we have the transition function.

# Smoothing component
We also include a smoothing component that allows for the mCPR to deviate away
from the expected rate of change given by the transitoin function.

For this applicatino, we used a first-order autoregressive process to smooth
the deviations. 

# Smoothing example
Here's an example with the smoothing term included.


# Illustrative fits
We fit the model using Bayesian inference, using the Stan probabilistic
programming language. Here are some example fits to a few countries. 

# Kenya 1
Looking a little closer, here is the raw data from Kenya. 

# Kenya 2
This is the transition function estimated for Kenya. 

# Kenya 3
And this is the estimated smoothing component. We can see the model is
detecting a slow-down in mCPR around the year 2000.

# Kenya 4
And here is how the transition model and smoothing term come together in the
final estimates and projections for Kenya. 

# FPET
This model based on B-splines has been adopted in the Family Planning
Estimation Tool, which is used to generate estimates of family planning
indicators like the mCPR. FPET is used by policy makers in low- and
middle-income countries, and by the FP2030 global initiative. 
